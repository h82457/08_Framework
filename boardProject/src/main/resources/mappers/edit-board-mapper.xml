<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.project.board.model.mapper.EditBoardMapper">


	<!-- 게시글 작성 (글부분만) -->
  	<insert id="boardInsert" useGeneratedKeys="true" parameterType="Board">
  		
  		<selectKey order="BEFORE" resultType="_int" keyProperty="boardNo">
  			SELECT SEQ_BOARD_NO.NEXTVAL FROM DUAL
  		</selectKey>
  	
	  	INSERT INTO "BOARD" 
	  	VALUES( #{boardNo}, #{boardTitle}, #{boardContent},
	  			DEFAULT, DEFAULT, DEFAULT, DEFAULT, #{boardCode}, #{memberNo}
	  	)
	  	
	</insert>

	<!-- 게시글 작성 (이미지만) -->
	<insert id="insertUploadList" parameterType="list">
		INSERT INTO "BOARD_IMG"
		
		<foreach collection="list" item="img" open="(" close=")" separator=" UNION ">
			SELECT NEXT_IMG_NO(), #{img.imgPath}, #{img.imgOriginalName}, #{img.imgRename}, 
				#{img.imgOrder}, #{img.boardNo} FROM DUAL
		</foreach>
	</insert>

	<!-- 게시글 삭제 -->
	<update id="boardDelete">
		UPDATE "BOARD"
		SET BOARD_DEL_FL = 'Y'
		WHERE BOARD_NO = ${boardNo}
	</update>

</mapper>



